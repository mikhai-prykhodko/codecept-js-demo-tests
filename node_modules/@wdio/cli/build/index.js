"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.run = void 0;

require("source-map-support/register");

var _yargs = _interopRequireDefault(require("yargs"));

var _lodash = _interopRequireDefault(require("lodash.pickby"));

var _config = require("./config");

var _launcher = _interopRequireDefault(require("./launcher"));

var _run = _interopRequireDefault(require("./run"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const run = () => {
  let argv = _yargs.default.usage(_config.USAGE).commandDir('commands');
  /**
   * populate cli arguments
   */


  for (const param of _config.CLI_PARAMS) {
    argv = argv.option(param.name, param);
  }

  const params = (0, _lodash.default)(argv.argv);
  /**
   * fail execution if more than one wdio config file was specified
   */

  if (params._.length > 1) {
    argv.showHelp();
    console.error(`More than one config file was specified: ${params._.join(', ')}`); // eslint-disable-line

    console.error('Error: You can only run one wdio config file!'); // eslint-disable-line

    process.exit(1);
  }

  (0, _run.default)(params);
};

exports.run = run;
var _default = _launcher.default;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJydW4iLCJhcmd2IiwieWFyZ3MiLCJ1c2FnZSIsIlVTQUdFIiwiY29tbWFuZERpciIsInBhcmFtIiwiQ0xJX1BBUkFNUyIsIm9wdGlvbiIsIm5hbWUiLCJwYXJhbXMiLCJfIiwibGVuZ3RoIiwic2hvd0hlbHAiLCJjb25zb2xlIiwiZXJyb3IiLCJqb2luIiwicHJvY2VzcyIsImV4aXQiLCJMYXVuY2hlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFTyxNQUFNQSxHQUFHLEdBQUcsTUFBTTtBQUNyQixNQUFJQyxJQUFJLEdBQUdDLGVBQ05DLEtBRE0sQ0FDQUMsYUFEQSxFQUVOQyxVQUZNLENBRUssVUFGTCxDQUFYO0FBSUE7Ozs7O0FBR0EsT0FBSyxNQUFNQyxLQUFYLElBQW9CQyxrQkFBcEIsRUFBZ0M7QUFDNUJOLElBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDTyxNQUFMLENBQVlGLEtBQUssQ0FBQ0csSUFBbEIsRUFBd0JILEtBQXhCLENBQVA7QUFDSDs7QUFFRCxRQUFNSSxNQUFNLEdBQUcscUJBQU9ULElBQUksQ0FBQ0EsSUFBWixDQUFmO0FBRUE7Ozs7QUFHQSxNQUFJUyxNQUFNLENBQUNDLENBQVAsQ0FBU0MsTUFBVCxHQUFrQixDQUF0QixFQUF5QjtBQUNyQlgsSUFBQUEsSUFBSSxDQUFDWSxRQUFMO0FBQ0FDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUFlLDRDQUEyQ0wsTUFBTSxDQUFDQyxDQUFQLENBQVNLLElBQVQsQ0FBYyxJQUFkLENBQW9CLEVBQTlFLEVBRnFCLENBRTREOztBQUNqRkYsSUFBQUEsT0FBTyxDQUFDQyxLQUFSLENBQWMsK0NBQWQsRUFIcUIsQ0FHMEM7O0FBQy9ERSxJQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxDQUFiO0FBQ0g7O0FBRUQsb0JBQU9SLE1BQVA7QUFDSCxDQXpCTTs7O2VBMkJRUyxpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB5YXJncyBmcm9tICd5YXJncydcbmltcG9ydCBwaWNrQnkgZnJvbSAnbG9kYXNoLnBpY2tieSdcblxuaW1wb3J0IHsgQ0xJX1BBUkFNUywgVVNBR0UgfSBmcm9tICcuL2NvbmZpZydcbmltcG9ydCBMYXVuY2hlciBmcm9tICcuL2xhdW5jaGVyJ1xuaW1wb3J0IHJ1bkNMSSBmcm9tICcuL3J1bidcblxuZXhwb3J0IGNvbnN0IHJ1biA9ICgpID0+IHtcbiAgICBsZXQgYXJndiA9IHlhcmdzXG4gICAgICAgIC51c2FnZShVU0FHRSlcbiAgICAgICAgLmNvbW1hbmREaXIoJ2NvbW1hbmRzJylcblxuICAgIC8qKlxuICAgICAqIHBvcHVsYXRlIGNsaSBhcmd1bWVudHNcbiAgICAgKi9cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIENMSV9QQVJBTVMpIHtcbiAgICAgICAgYXJndiA9IGFyZ3Yub3B0aW9uKHBhcmFtLm5hbWUsIHBhcmFtKVxuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtcyA9IHBpY2tCeShhcmd2LmFyZ3YpXG5cbiAgICAvKipcbiAgICAgKiBmYWlsIGV4ZWN1dGlvbiBpZiBtb3JlIHRoYW4gb25lIHdkaW8gY29uZmlnIGZpbGUgd2FzIHNwZWNpZmllZFxuICAgICAqL1xuICAgIGlmIChwYXJhbXMuXy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGFyZ3Yuc2hvd0hlbHAoKVxuICAgICAgICBjb25zb2xlLmVycm9yKGBNb3JlIHRoYW4gb25lIGNvbmZpZyBmaWxlIHdhcyBzcGVjaWZpZWQ6ICR7cGFyYW1zLl8uam9pbignLCAnKX1gKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiBZb3UgY2FuIG9ubHkgcnVuIG9uZSB3ZGlvIGNvbmZpZyBmaWxlIScpIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpXG4gICAgfVxuXG4gICAgcnVuQ0xJKHBhcmFtcylcbn1cblxuZXhwb3J0IGRlZmF1bHQgTGF1bmNoZXJcbiJdfQ==